var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){t.appendChild(e)}function a(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode&&t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function s(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t){return""===t?null:+t}function m(t,e){e=""+e,t.data!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}function b(t,e,n,l){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function $(t,e,n){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e)return void(l.selected=!0)}n&&void 0===e||(t.selectedIndex=-1)}let y;function k(t){y=t}function _(){const t=function(){if(!y)throw new Error("Function called outside component initialization");return y}();return(e,n,{cancelable:l=!1}={})=>{const o=t.$$.callbacks[e];if(o){const r=function(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,l,e),o}(e,n,{cancelable:l});return o.slice().forEach((e=>{e.call(t,r)})),!r.defaultPrevented}return!0}}const C=[],x=[];let w=[];const z=[],E=Promise.resolve();let D=!1;function S(t){w.push(t)}const A=new Set;let M=0;function T(){if(0!==M)return;const t=y;do{try{for(;M<C.length;){const t=C[M];M++,k(t),N(t.$$)}}catch(t){throw C.length=0,M=0,t}for(k(null),C.length=0,M=0;x.length;)x.pop()();for(let t=0;t<w.length;t+=1){const e=w[t];A.has(e)||(A.add(e),e())}w.length=0}while(C.length);for(;z.length;)z.pop()();D=!1,A.clear(),k(t)}function N(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(S)}}const B=new Set;let F;function L(t,e){t&&t.i&&(B.delete(t),t.i(e))}function P(t,e,n,l){if(t&&t.o){if(B.has(t))return;B.add(t),F.c.push((()=>{B.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}else l&&l()}function G(t){t&&t.c()}function I(t,n,r,c){const{fragment:a,after_update:i}=t.$$;a&&a.m(n,r),c||S((()=>{const n=t.$$.on_mount.map(e).filter(o);t.$$.on_destroy?t.$$.on_destroy.push(...n):l(n),t.$$.on_mount=[]})),i.forEach(S)}function O(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];w.forEach((l=>-1===t.indexOf(l)?e.push(l):n.push(l))),n.forEach((t=>t())),w=e}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function j(t,e){-1===t.$$.dirty[0]&&(C.push(t),D||(D=!0,E.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function q(e,o,r,c,a,u,s,f=[-1]){const d=y;k(e);const p=e.$$={fragment:null,ctx:[],props:u,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(o.context||(d?d.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:o.target||d.$$.root};s&&s(p.root);let g=!1;if(p.ctx=r?r(e,o.props||{},((t,n,...l)=>{const o=l.length?l[0]:n;return p.ctx&&a(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),g&&j(e,t)),n})):[],p.update(),g=!0,l(p.before_update),p.fragment=!!c&&c(p.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);p.fragment&&p.fragment.l(t),t.forEach(i)}else p.fragment&&p.fragment.c();o.intro&&L(e.$$.fragment),I(e,o.target,o.anchor,o.customElement),T()}k(d)}class R{$destroy(){O(this,1),this.$destroy=t}$on(e,n){if(!o(n))return t;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const t=l.indexOf(n);-1!==t&&l.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(t,e,n){const l=t.slice();return l[13]=e[n],l[14]=e,l[15]=n,l}function W(t){let e,n,o,r,u,f,m,b,$,y,k,_,C,x,w,z,E,D;function S(){t[5].call(o,t[14],t[15])}function A(){t[6].call(f,t[14],t[15])}function M(){t[7].call($,t[14],t[15])}function T(){t[8].call(C,t[14],t[15])}let N=t[15]>0&&function(t){let e,n,l;function o(){return t[9](t[15])}return{c(){e=s("button"),e.textContent="Remove",g(e,"class","svelte-f2lca0")},m(t,r){a(t,e,r),n||(l=p(e,"click",o),n=!0)},p(e,n){t=e},d(t){t&&i(e),n=!1,l()}}}(t);return{c(){e=s("tr"),n=s("td"),o=s("input"),r=d(),u=s("td"),f=s("input"),m=d(),b=s("td"),$=s("input"),k=d(),_=s("td"),C=s("input"),x=d(),w=s("td"),N&&N.c(),z=d(),g(o,"type","text"),g(o,"placeholder","mana, draw, ramp, etc"),g(o,"class","svelte-f2lca0"),g(n,"class","svelte-f2lca0"),g(f,"type","number"),g(f,"min","1"),g(f,"max","99"),g(f,"class","svelte-f2lca0"),g(u,"class","svelte-f2lca0"),g($,"type","number"),g($,"min","1"),g($,"max","99"),$.disabled=y=!!t[13].link,g($,"class","svelte-f2lca0"),g(b,"class","svelte-f2lca0"),g(C,"type","text"),g(C,"placeholder","combo pieces, synergy 1, etc"),g(C,"class","svelte-f2lca0"),g(_,"class","svelte-f2lca0"),g(w,"class","svelte-f2lca0")},m(l,i){a(l,e,i),c(e,n),c(n,o),v(o,t[13].name),c(e,r),c(e,u),c(u,f),v(f,t[13].size),c(e,m),c(e,b),c(b,$),v($,t[13].cardsToDraw),c(e,k),c(e,_),c(_,C),v(C,t[13].link),c(e,x),c(e,w),N&&N.m(w,null),c(e,z),E||(D=[p(o,"input",S),p(f,"input",A),p($,"input",M),p(C,"input",T)],E=!0)},p(e,n){t=e,1&n&&o.value!==t[13].name&&v(o,t[13].name),1&n&&h(f.value)!==t[13].size&&v(f,t[13].size),1&n&&y!==(y=!!t[13].link)&&($.disabled=y),1&n&&h($.value)!==t[13].cardsToDraw&&v($,t[13].cardsToDraw),1&n&&C.value!==t[13].link&&v(C,t[13].link),t[15]>0&&N.p(t,n)},d(t){t&&i(e),N&&N.d(),E=!1,l(D)}}}function Y(e){let n,o,r,f,m,b,y,k,_,C,x,w,z,E,D,A,M,T,N,B,F,L,P,G,I,O=e[0],j=[];for(let t=0;t<O.length;t+=1)j[t]=W(H(e,O,t));return{c(){n=s("div"),o=s("table"),r=s("thead"),r.innerHTML='<tr><th class="svelte-f2lca0">Category Name</th> \n                <th class="svelte-f2lca0"># Cards in category</th> \n                <th class="svelte-f2lca0"># Desired Cards</th> \n                <th class="svelte-f2lca0">Linked Categories*</th> \n                <th class="svelte-f2lca0">Actions</th></tr>',f=d(),m=s("tbody");for(let t=0;t<j.length;t+=1)j[t].c();b=d(),y=s("div"),k=s("button"),k.textContent="Add Another Group",_=d(),C=s("div"),x=s("label"),x.textContent="Number of Mulligans**:",w=d(),z=s("select"),E=s("option"),E.textContent="0",D=s("option"),D.textContent="1",A=s("option"),A.textContent="2",M=s("option"),M.textContent="3",T=s("option"),T.textContent="4",N=d(),B=s("div"),F=s("label"),F.textContent="Deck Size:",L=d(),P=s("input"),g(o,"class","svelte-f2lca0"),g(k,"class","svelte-f2lca0"),g(x,"for","mulliganCount"),g(x,"class","svelte-f2lca0"),E.__value="0",E.value=E.__value,D.__value="1",D.value=D.__value,A.__value="2",A.value=A.__value,M.__value="3",M.value=M.__value,T.__value="4",T.value=T.__value,g(z,"class","svelte-f2lca0"),void 0===e[2]&&S((()=>e[10].call(z))),g(C,"class","mulligan-selection svelte-f2lca0"),g(F,"for","deckSize"),g(F,"class","svelte-f2lca0"),g(P,"type","number"),g(P,"id","deckSize"),g(P,"min","1"),g(P,"class","svelte-f2lca0"),g(B,"class","deck-size-container svelte-f2lca0"),g(y,"class","controls-container svelte-f2lca0"),g(n,"class","parameters svelte-f2lca0")},m(t,l){a(t,n,l),c(n,o),c(o,r),c(o,f),c(o,m);for(let t=0;t<j.length;t+=1)j[t]&&j[t].m(m,null);c(n,b),c(n,y),c(y,k),c(y,_),c(y,C),c(C,x),c(C,w),c(C,z),c(z,E),c(z,D),c(z,A),c(z,M),c(z,T),$(z,e[2],!0),c(y,N),c(y,B),c(B,F),c(B,L),c(B,P),v(P,e[1]),G||(I=[p(k,"click",e[3]),p(z,"change",e[10]),p(P,"input",e[11])],G=!0)},p(t,[e]){if(17&e){let n;for(O=t[0],n=0;n<O.length;n+=1){const l=H(t,O,n);j[n]?j[n].p(l,e):(j[n]=W(l),j[n].c(),j[n].m(m,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=O.length}4&e&&$(z,t[2]),2&e&&h(P.value)!==t[1]&&v(P,t[1])},i:t,o:t,d(t){t&&i(n),u(j,t),G=!1,l(I)}}}function J(t,e,n){const l=_();let o=[{name:"",size:1,cardsToDraw:1,link:""}],r=99,c=0;function a(t){n(0,o=o.filter(((e,n)=>n!==t)))}return t.$$.update=()=>{7&t.$$.dirty&&o.length>0&&(n(0,o=o.map((t=>t.link?{...t,cardsToDraw:1}:t))),l("updateGroups",{groups:o,deckSize:r,mulliganCount:c}))},[o,r,c,function(){n(0,o=[...o,{name:"",size:1,cardsToDraw:1,link:""}])},a,function(t,e){t[e].name=this.value,n(0,o),n(1,r),n(2,c)},function(t,e){t[e].size=h(this.value),n(0,o),n(1,r),n(2,c)},function(t,e){t[e].cardsToDraw=h(this.value),n(0,o),n(1,r),n(2,c)},function(t,e){t[e].link=this.value,n(0,o),n(1,r),n(2,c)},t=>a(t),function(){c=function(t){const e=t.querySelector(":checked");return e&&e.__value}(this),n(2,c)},function(){r=h(this.value),n(1,r)}]}class K extends R{constructor(t){super(),q(this,t,J,Y,r,{})}}function Q(t,e,n){const l=t.slice();return l[13]=e[n],l[15]=n,l}function U(t,e,n){const l=t.slice();return l[16]=e[n],l}function V(t){let e,n,l,o,r,u,p,h=null!==t[16].probability?`${t[16].probability}%`:"",v=t[16].label+"";return{c(){e=s("div"),n=s("div"),l=f(h),o=d(),r=s("div"),u=f(v),p=d(),g(n,"class","rectangle svelte-1ggp6sv"),b(n,"background-color",null!==t[16].probability?t[2][t[16].label]:"#e5e5e5"),g(r,"class","card-label svelte-1ggp6sv"),g(e,"class","card-container svelte-1ggp6sv")},m(t,i){a(t,e,i),c(e,n),c(n,l),c(e,o),c(e,r),c(r,u),c(e,p)},p(t,e){3&e&&h!==(h=null!==t[16].probability?`${t[16].probability}%`:"")&&m(l,h),7&e&&b(n,"background-color",null!==t[16].probability?t[2][t[16].label]:"#e5e5e5"),3&e&&v!==(v=t[16].label+"")&&m(u,v)},d(t){t&&i(e)}}}function X(t){let e,n,l,o,r,p,h,m,v=lt(t[0],t[1],t[15]),b=[];for(let e=0;e<v.length;e+=1)b[e]=V(U(t,v,e));return{c(){e=s("div"),n=s("div"),l=f("Turn "),o=f(t[15]),r=f(":"),p=d(),h=s("div");for(let t=0;t<b.length;t+=1)b[t].c();m=d(),g(n,"class","turn-label svelte-1ggp6sv"),g(h,"class","card-rectangles svelte-1ggp6sv"),g(e,"class","turn-row svelte-1ggp6sv")},m(t,i){a(t,e,i),c(e,n),c(n,l),c(n,o),c(n,r),c(e,p),c(e,h);for(let t=0;t<b.length;t+=1)b[t]&&b[t].m(h,null);c(e,m)},p(t,e){if(7&e){let n;for(v=lt(t[0],t[1],t[15]),n=0;n<v.length;n+=1){const l=U(t,v,n);b[n]?b[n].p(l,e):(b[n]=V(l),b[n].c(),b[n].m(h,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=v.length}},d(t){t&&i(e),u(b,t)}}}function Z(e){let n,l=Array(5),o=[];for(let t=0;t<l.length;t+=1)o[t]=X(Q(e,l,t));return{c(){n=s("div");for(let t=0;t<o.length;t+=1)o[t].c();g(n,"class","output-diagram svelte-1ggp6sv")},m(t,e){a(t,n,e);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(n,null)},p(t,[e]){if(7&e){let r;for(l=Array(5),r=0;r<l.length;r+=1){const c=Q(t,l,r);o[r]?o[r].p(c,e):(o[r]=X(c),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=l.length}},i:t,o:t,d(t){t&&i(n),u(o,t)}}}function tt(t,e){let n=1;for(let l=1;l<=e;l++)n*=(t+1-l)/l;return n}function et(t,e,n,l){return tt(n,t)*tt(e-n,l-t)/tt(e,l)}function nt(t,e,n){return Math.min(1,function l(o,r,c){if(o===t.length)return c*tt(e-(a=o,t.slice(0,a).reduce(((t,e)=>t+e),0)),r)/tt(e,n);var a;let i=0;for(let e=1;e<=Math.min(r,t[o]);e++)i+=l(o+1,r-e,c*tt(t[o],e));return i}(0,n,1))}function lt(t,e,n){let l=t.map((t=>{let l=t.link?t.link:t.name,o=e[l];return{probability:o&&n<o.length?Math.round(1e3*o[n].probability)/10:null,label:t.name}}));for(;l.length<7+n;)l.push({probability:null,label:""});return l}function ot(t,e,n){function l(t){const e=[];let l=7;const o=t.map((t=>t.size)),c=t[0].link;for(let t=0;t<=4;t++){t>0&&(l+=1);let n=nt(o,r,l);e.push({turn:t,probability:n})}n(1,a[c]=e,a)}let{groups:o=[]}=e,{deckSize:r}=e,{mulliganCount:c}=e,a={};function i(){console.log("Calculating probabilities for groups:",o),n(1,a={});const t={};o.forEach((e=>{e.link?(t[e.link]||(t[e.link]=[]),t[e.link].push(e)):function(t){const e=[];let l=7,o=r-c,i=0;for(let n=0;n<=4;n++){let a;if(n>0&&(l+=1),0===n){let e=s(t,l);a=u(t,l,r,c),i=a-e}else a=s(t,l)+i,a=Math.min(1,a);e.push({turn:n,probability:a}),console.log(`Turn ${n}: Probability = ${a}, Deck Size After Mulligan = ${o}`)}n(1,a[t.name]=e,a)}(e)}));for(const e in t)l(t[e])}function u(t,e,n,l){let o=0;for(let n=0;n<=l;n++){o+=(1-o)*s(t,e)}return Math.min(1,o)}function s(t,e){let n=0;for(let l=t.cardsToDraw;l<=Math.min(t.size,e);l++)n+=et(l,r,t.size,e);return n}const f=["#E1BEE7","#B2DFDB","#FFE0B2","#DCEDC8","#B3E5FC","#FFCCBC","#C5CAE9"];let d={},p=0;return t.$$set=t=>{"groups"in t&&n(0,o=t.groups),"deckSize"in t&&n(3,r=t.deckSize),"mulliganCount"in t&&n(4,c=t.mulliganCount)},t.$$.update=()=>{1&t.$$.dirty&&o.length>0&&i(),1&t.$$.dirty&&o.length>0&&(!function(t){t.forEach((t=>{t.link?(d[t.link]||(n(2,d[t.link]=f[p%f.length],d),p++),n(2,d[t.name]=d[t.link],d)):d[t.name]||(n(2,d[t.name]=f[p%f.length],d),p++)}))}(o),i())},[o,a,d,r,c]}class rt extends R{constructor(t){super(),q(this,t,ot,Z,r,{groups:0,deckSize:3,mulliganCount:4})}}function ct(t){let e,n,l,o,r,u,f,p,h;return n=new K({}),n.$on("updateGroups",t[3]),o=new rt({props:{groups:t[0],deckSize:t[1],mulliganCount:t[2]}}),{c(){e=s("main"),G(n.$$.fragment),l=d(),G(o.$$.fragment),r=d(),u=s("p"),u.textContent="*You can link up to 4 categories by assigning them the same name (name must match). Linked groups don't support more than 1 Desired card or mulligans currently.",f=d(),p=s("p"),p.textContent="**WARNING - Mulligan feature is experimental. Mulligan on turn 0 factors in calculations and such, while mulligans on turn 1, turn 2, etc. simply add the increased probability of getting the desired card from turn 0. I am sure this is not an accurate method but it's the best I could think of for now.",g(e,"class","parameters svelte-3dwzqf")},m(t,i){a(t,e,i),I(n,e,null),c(e,l),I(o,e,null),c(e,r),c(e,u),c(e,f),c(e,p),h=!0},p(t,[e]){const n={};1&e&&(n.groups=t[0]),2&e&&(n.deckSize=t[1]),4&e&&(n.mulliganCount=t[2]),o.$set(n)},i(t){h||(L(n.$$.fragment,t),L(o.$$.fragment,t),h=!0)},o(t){P(n.$$.fragment,t),P(o.$$.fragment,t),h=!1},d(t){t&&i(e),O(n),O(o)}}}function at(t,e,n){let l=[],o=99,r=0;return[l,o,r,function(t){n(0,l=t.detail.groups),n(1,o=t.detail.deckSize),n(2,r=t.detail.mulliganCount)}]}return new class extends R{constructor(t){super(),q(this,t,at,ct,r,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
